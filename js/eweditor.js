/**
 * HTML Editor for PHPMaker 2025
 * @license Copyright (c) e.World Technology Limited. All rights reserved.
 */
tinymce.DOM.get=function(e){if(e&&this.doc&&typeof e=="string"){let m=e.match(/^(f[\w]+)\$(x[\w]+)\$$/);if(m){let f=this.doc.getElementById(m[1]);e=f?ew.getElement(m[2],f):null}else{e=this.doc.getElementById(e)}}return e};ew.createEditor=function(formid,name,cols,rows,readonly){if(typeof tinymce=="undefined"||name.includes("$rowindex$"))return;let form=document.getElementById(formid),el=ew.getElement(name,form);if(!el)return;let $=jQuery,language=(ew.LANGUAGE_ID||"").replace("-","_"),useDarkMode=ew.isDark(),settings={height:(rows?Math.abs(rows):4)*4+"em",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount"],ui_mode:el.closest(".modal")?"split":"combined",toolbar:"undo redo | blocks | "+"bold italic backcolor | alignleft aligncenter "+"alignright alignjustify | bullist numlist outdent indent | "+"removeformat | help",skin:useDarkMode?"oxide-dark":"oxide",content_css:useDarkMode?"dark":"default",relative_urls:false,document_base_url:ew.currentUrl.origin,remove_script_host:true};if(ew.TINYMCE_VERSION>=7)settings.license_key=ew.TINYMCE_LICENSE_KEY||"gpl";if(language!="en_US")settings.language=language;if(ew.RTL_LANGUAGES.includes(language.split("_")[0]))settings.directionality="rtl";let args={id:name,enabled:true,form:form,settings:settings};$(document).trigger("create.editor",[args]);if(!args.enabled)return;if(readonly){args.settings.readonly=true;args.settings.menubar=false;args.settings.plugins=[];args.settings.toolbar=false;delete args.settings.toolbar1;delete args.settings.toolbar2}let editor={name:name,active:false,instance:null,create:function(){let longname=formid+"$"+name+"$",ed=this.instance=tinymce.EditorManager.createEditor(longname,args.settings);ed.render(true);ed.on("init",ew.fixLayoutHeight);this.active=true},set:function(){this.instance?.setContent(el.value)},save:function(){this.instance?.save();let args={id:name,form:form,value:ew.removeSpaces(el.value)};$(document).trigger("save.editor",[args]).val(args.value)},focus:function(){this.instance?.focus(false)},destroy:function(){!this.instance||tinymce.remove(this.instance);this.active=false}};$(el).data("editor",editor).addClass("editor")};
