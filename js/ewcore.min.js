/*!
 * Core JavaScript for PHPMaker v2025.10.0
 * Copyright (c) e.World Technology Limited. All rights reserved.
 */
var ew=function(){"use strict";var e=function(){},t={},n={},i={};function r(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function o(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function a(t,n,i,r){var o,s=document,l=i.async,u=(i.numRetries||0)+1,c=i.before||e,d=t.replace(/[\?|#].*$/,""),p=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(d)?((o=s.createElement("link")).rel="stylesheet",o.href=p):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(d)?(o=s.createElement("img")).src=p:((o=s.createElement("script")).src=t,o.async=void 0===l||l),o.onload=o.onerror=o.onbeforeload=function(e){var s=e.type[0];if("e"==s){if((r+=1)<u)return a(t,n,i,r)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";n(t,s,e.defaultPrevented)},!1!==c(t,o)&&"IMG"!=o.tagName&&s.head.appendChild(o)}function s(e,n,i){var s,l;if(n&&n.trim&&(s=n),l=(s?i:n)||{},s){if(s in t)throw"LoadJS";t[s]=!0}function u(t,n){!function(e,t,n){var i,r,o=(e=e.push?e:[e]).length,s=o,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e)}--o||t(l)},r=0;r<s;r++)a(e[r],i,n)}(e,(function(e){o(l,e),t&&o({success:t,error:n},e),r(s,e)}),l)}if(l.returnPromise)return new Promise(u);u()}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,u(i.key),i)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}s.ready=function(e,t){return function(e,t){e=e.push?e:[e];var r,o,a,s=[],l=e.length,u=l;for(r=function(e,n){n.length&&s.push(e),--u||t(s)};l--;)o=e[l],(a=n[o])?r(o,a):(i[o]=i[o]||[]).push(r)}(e,(function(e){o(t,e)})),s},s.done=function(e){r(e,[])},s.reset=function(){t={},n={},i={}},s.isDefined=function(e){return e in t};let h=function(){function e(e){p(this,"data",{}),this.data=null!=e?e:{}}return e.prototype.phrase=function(e){var t;return null!=(t=this.data[e.toLowerCase()])?t:e},d(e,[{key:"phrases",get:function(){return this.data},set:function(e){this.data=e}}])}();function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function y(e){var t="function"==typeof Map?new Map:void 0;return y=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(g())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&f(r,n.prototype),r}(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)},y(e)}let b=function(){return d((function(e,t,n){p(this,"_selected",void 0),p(this,"_selectionList",void 0),p(this,"_innerHTML",""),p(this,"_value",""),p(this,"_defaultSelected",!1),this._innerHTML=String(e),this._value=String(t),this._defaultSelected=!!n}),[{key:"text",get:function(){return this._innerHTML},set:function(e){this._innerHTML=String(e)}},{key:"innerHTML",get:function(){return this._innerHTML},set:function(e){this._innerHTML=e}},{key:"value",get:function(){return this._value},set:function(e){this._value=String(e)}},{key:"defaultSelected",get:function(){return this._defaultSelected},set:function(e){this._defaultSelected=!!e}},{key:"selectionList",get:function(){return this._selectionList},set:function(e){this._selectionList=e}},{key:"selected",get:function(){var e;return null!=(e=this._selected)?e:this.defaultSelected},set:function(e){var t;this._selected=e,null==(t=this._selectionList)||t.render()}}])}(),v=function(e){function t(){var t;return p(t=e.call(this)||this,"containerClass","d-sm-table"),p(t,"rowClass","d-sm-table-row"),p(t,"cellClass","d-sm-table-cell"),p(t,"options",[]),t._internals=t.attachInternals(),t}var n,i;i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,f(n,i);var r=t.prototype;return r.connectedCallback=function(){let e=this.getAttribute("value")||"",t=this.multiple?e.split(ew.MULTIPLE_OPTION_SEPARATOR):[e];for(let e of t)this.add(e,"",!0)},r.add=function(e,t,n){let i=new b(t,e,n);this.addOption(i)},r.addOption=function(e){if(e instanceof b){e.selectionList=this;let t=this.options.findIndex((t=>t.value==e.value));t>-1?this.options[t]=e:this.options.push(e)}},r.remove=function(e){this.options[e]&&this.options.splice(e,1)},r.removeAll=function(){this.options.splice(0)},r.clear=function(){for(let e of this.options)e.selected=!1;this.render()},r.getRandom=function(){return Math.floor(899999*Math.random())+1e5},r.triggerChange=function(){const e=new Event("change",{view:window,bubbles:!0,cancelable:!1});this.dispatchEvent(e)},r.isInvalid=function(e){return/\bis-invalid\b/.test(e)},r.attributeChangedCallback=function(e,t,n){if("class"==e){if(this.targetId&&this.isInvalid(t)!=this.isInvalid(n)){let e=document.getElementById(this.targetId).querySelectorAll("input"),t=this.isInvalid(n);e.forEach((e=>e.classList.toggle("is-invalid",t)))}}else if("value"==e)this._internals.setFormValue(this.value),""!==this.value&&this.classList.remove("is-invalid");else if("disabled"==e){let e=document.getElementById(this.targetId).querySelectorAll("input");console.log(t,n),e.forEach((e=>e.disabled=this.hasAttribute("disabled")))}},r.showLoading=function(){var e;null==(e=this.target)||e.appendChild(document.createRange().createContextualFragment(ew.spinnerTemplate()))},r.hideLoading=function(){var e;null==(e=this.target)||null==(e=e.querySelector(".ew-loading"))||e.remove()},r.render=function(){let e=this.target,t=this.template;if(!e||!t||!this.list)return;for(;e.firstChild;)e.removeChild(e.firstChild);e.innerHTML=ew.spinnerTemplate();let n,i,r,o=this,a=t.content.cloneNode(!0),s=a.querySelector("input"),l=this.columns||1,u=document.createElement("div"),c=this.length,d="_"+this.getRandom(),p=this.classList.contains("is-invalid");var h;(u.className=this.containerClass+" ew-item-container","radio"==s.type||"checkbox"==s.type)&&(i=s.title,r=null==(h=s.dataset)?void 0:h.bsToggle,i&&r&&(s.removeAttribute("title"),s.removeAttribute("data-bs-toggle"),$(u).attr("title",i).tooltip(ew.tooltipOptions)));this.options.filter((e=>e.value)).forEach(((e,t)=>{let i=a.cloneNode(!0),r=i.querySelector("input"),s=i.querySelector("label"),h="_"+this.getRandom();r.name=r.name+("radio"==r.type?d:h),r.id=r.id+h,r.value=e.value,r.setAttribute("data-index",t),r.checked=e.selected,r.disabled=this.disabled,r.classList.add("ew-custom-option"),p&&r.classList.add("is-invalid"),r.addEventListener("click",(function(){var e;null==(e=bootstrap.Tooltip.getInstance(u))||e.hide();let t=parseInt(this.getAttribute("data-index"),10);if("select-one"==o.type)for(let e of o.options)e.selected=!1;o.options[t].selected=this.checked,o.setAttribute("value",o.value),o.triggerChange()})),s.innerHTML=e.text,s.htmlFor=r.id;let f=document.createElement("div");if(f.className=this.cellClass,f.appendChild(i),t%l==0&&(n=document.createElement("div"),n.className=this.rowClass),n.append(f),t%l==l-1)u.append(n);else if(t==c-1){for(let e=t%l+1;e<l;e++){let e=document.createElement("div");e.className=this.cellClass,n.append(e)}u.append(n)}})),e.innerHTML="",e.append(u),this.setAttribute("value",this.value)},r.focus=function(){var t;this.list?null==(t=this.target)||null==(t=t.querySelector("input"))||t.focus():e.prototype.focus.call(this)},d(t,[{key:"form",get:function(){return this._internals.form}},{key:"name",get:function(){return this.getAttribute("name")}},{key:"targetId",get:function(){return this.getAttribute("data-target")}},{key:"target",get:function(){return this.parentNode.querySelector("#"+this.targetId)}},{key:"templateId",get:function(){return this.getAttribute("data-template")}},{key:"template",get:function(){return this.parentNode.querySelector("#"+this.templateId)}},{key:"inputId",get:function(){return this.getAttribute("data-input")}},{key:"input",get:function(){return this.parentNode.querySelector("#"+this.inputId)}},{key:"list",get:function(){return this.options}},{key:"columns",get:function(){var e;if(null!=(e=ew)&&e.IS_MOBILE)return 1;{let e=this.getAttribute("data-repeatcolumn");return e?parseInt(e,10):1}}},{key:"length",get:function(){return this.options.length}},{key:"selectedIndex",get:function(){return this.options.findIndex((e=>e.selected))},set:function(e){let t=this.options[e];t&&(this.options.forEach((e=>e.selected=!1)),t.selected=!0,this.render())}},{key:"type",get:function(){return this.getAttribute("data-type")||this.getAttribute("type")}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}},{key:"multiple",get:function(){return"select-multiple"==this.type}},{key:"value",get:function(){return"select-one"==this.type||"select-multiple"==this.type?this.values.join(ew.MULTIPLE_OPTION_SEPARATOR||","):this.getAttribute("value")},set:function(e){if("select-one"==this.type)for(let t of this.options)t.selected=t.value==e;else if("select-multiple"==this.type){let t;Array.isArray(e)?t=e.map((e=>null!=e?e:String(e))):(null!=e||(e=String(e)),t=e?e.split(ew.MULTIPLE_OPTION_SEPARATOR||","):[]);for(let e of this.options)e.selected=t.includes(String(e.value))}else this.setAttribute("value",e);this.render()}},{key:"values",get:function(){if("select-one"==this.type||"select-multiple"==this.type)return this.options.filter((e=>e.selected)).map((e=>e.value));{let e=this.getAttribute("value");return e?e.split(ew.MULTIPLE_OPTION_SEPARATOR||","):[]}}}],[{key:"observedAttributes",get:function(){return["class","value","disabled"]}},{key:"formAssociated",get:function(){return!0}}])}(y(HTMLElement));
/*! js-cookie v3.0.5 | MIT */
function w(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var S=function e(t,n){function i(e,i,r){if("undefined"!=typeof document){"number"==typeof(r=w({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in r)r[a]&&(o+="; "+a,!0!==r[a]&&(o+="="+r[a].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+o}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},r=0;r<n.length;r++){var o=n[r].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(i[s]=t.read(a,s),e===s)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",w({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,w({},this.attributes,t))},withConverter:function(t){return e(w({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let E=null;s.ready("adminlte",(function(){let e=jQuery;e(window).off("load.lte.treeview").off("load.lte.sidebarsearch"),s.ready("templates",(()=>{document.querySelectorAll("[data-widget=treeview]").forEach((t=>e(t).Treeview(null))),document.querySelectorAll("[data-widget=sidebar-search]").forEach((t=>e(t).SidebarSearch(null)))})),adminlte.CardRefresh.overlayTemplate=ew.overlayTemplate()})),window.loadjs=s,customElements.define("selection-list",v);let A,T=()=>{},O=e=>(e.element instanceof HTMLOptionElement?e.element.innerHTML:"")||e.text,C={SelectionListOption:b,PAGE_ID:"",RELATIVE_PATH:"",MULTIPLE_OPTION_SEPARATOR:",",GENERATE_PASSWORD_UPPERCASE:!0,GENERATE_PASSWORD_LOWERCASE:!0,GENERATE_PASSWORD_NUMBER:!0,GENERATE_PASSWORD_SPECIALCHARS:1,CONFIRM_CANCEL:!0,UNFORMAT_YEAR:50,LAZY_LOAD_DELAY:0,AJAX_DELAY:5,LOOKUP_DELAY:250,MAX_OPTION_COUNT:3,MIN_SESSION_KEEP_ALIVE_INTERVAL:60,NUMBERING_SYSTEM:"",SERVICE_WORKER:"sw.js",Cookies:S,uniqueTabId:((e={})=>{const t=e.key??"unique-tab-id";let n,i,r,o;if(void 0!==e.storage)n=e.storage;else try{n=window.sessionStorage}catch{n={}}if(void 0!==e.navEntries)i=e.navEntries;else try{i=window.performance.getEntriesByType("navigation")}catch{i=[]}try{r=n.getItem(t),o=!0}catch{r=E,o=!1}const a=null!==r;if(a&&!o)return{tabId:r,hasExisting:!0,usingExisting:!0};const s="back_forward"===(i&&i.length?i[0]:{type:null}).type;if(a&&!s)return{tabId:r,hasExisting:!0,usingExisting:!0,mayBeDuplicate:!1};const l=(()=>{if(globalThis.crypto?.randomUUID)return globalThis.crypto.randomUUID();const e=new Uint8Array(16);if(globalThis.crypto?.getRandomValues)globalThis.crypto.getRandomValues(e);else for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=[];return e.forEach((e=>{t.push(e.toString(16).padStart(2,"0"))})),t.slice(0,4).join("")+"-"+t.slice(4,6).join("")+"-"+t.slice(6,8).join("")+"-"+t.slice(8,10).join("")+"-"+t.slice(10).join("")})();try{n.setItem(t,l)}catch{E=l}return{tabId:l,hasExisting:a,usingExisting:!1,mayBeDuplicate:s}})(),Language:h,language:new h,vars:null,maps:{},addOptionDialog:null,emailDialog:null,importDialog:null,modalDialog:null,modalLookupDialog:null,ajaxBatchSize:5,autoSuggestSettings:{highlight:!0,hint:!0,minLength:1,debounce:250,delay:250,templates:{},classNames:{menu:"tt-menu dropdown-menu",input:"tt-input form-control",dataset:"tt-dataset",suggestion:"tt-suggestion dropdown-item",cursor:"active"}},lightboxSettings:{transition:"none",photo:!0,opacity:.5},calendarOptions:{showViewPageOnEventClick:!1,useContextMenu:!0,usePopover:!0,popoverViews:["dayGridMonth"],fullCalendarOptions:{headerToolbar:{start:"prev,next today",center:"title",end:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},longPressDelay:1250,eventSelectLongPressDelay:750,themeSystem:"bootstrap5",initialView:"dayGridMonth",dayMaxEventRows:!0,timeZone:"UTC",droppable:!0,editable:!0},eventPopoverOptions:{placement:"auto",trigger:"hover",html:!0}},uploadOptions:{cropperOptions:{autoCropArea:1,viewMode:2},cropperCanvasOptions:{minWidth:256,minHeight:256,maxWidth:4096,maxHeight:4096,fillColor:"#fff",imageSmoothingQuality:"high"}},importUploadOptions:{maxFileSize:1e7,maxNumberOfFiles:10},sweetAlertSettings:{showClass:{popup:"swal2-noanimation",backdrop:"swal2-noanimation",icon:""},hideClass:{popup:"",backdrop:"",icon:""},customClass:{container:"ew-swal2-container",popup:"ew-swal2-popup",header:"ew-swal2-header",title:"ew-swal2-title",closeButton:"ew-swal2-close-button",icon:"ew-swal2-icon",image:"ew-swal2-image",htmlContainer:"ew-swal2-html-container",content:"ew-swal2-content",input:"form-control ew-swal2-input",inputLabel:"ew-swal2-input-label",validationMessage:"ew-swal2-validation-message",actions:"ew-swal2-actions",confirmButton:"btn btn-primary ew-swal2-confirm-button",denyButton:"btn btn-danger ew-swal2-deny-button",cancelButton:"btn btn-secondary ew-swal2-cancel-button",loader:"ew-swal2-loader",footer:"ew-swal2-footer"}},selectOptions:{allowClear:!0,theme:"bootstrap5",width:"style",minimumResultsForSearch:20,escapeMarkup:e=>e,templateResult:O,templateSelection:O,debounce:250,customOption:!0,containerClass:"d-sm-table",rowClass:"d-sm-table-row",cellClass:"d-sm-table-cell text-nowrap",iconClass:"form-check-label"},selectMinimumInputLength:1,modalLookupOptions:{allowClear:!0,theme:"bootstrap5",width:"100%",escapeMarkup:e=>e,templateResult:O,templateSelection:O,closeOnSelect:!1,minimumInputLength:0,dropdownCssClass:"ew-modal-dropdown",modal:!0,debounce:250,draggableOptions:{cursor:"grabbing"}},filterOptions:{allowClear:!0,theme:"bootstrap5",width:"100%",escapeMarkup:e=>e,templateResult:O,templateSelection:O,closeOnSelect:!1,minimumInputLength:0,dropdownAutoWidth:!0,dropdownCssClass:"ew-filter-dropdown",debounce:250,customOption:!0,columns:1,multiple:!0,preventScroll:!0,containerClass:"container",rowClass:"row",cellClass:"col text-nowrap",iconClass:"form-check-label"},importTabulatorOptions:{height:300},toastOptions:{position:"topRight"},tippyOptions:{theme:"translucent"},DOMPurifyConfig:{},sanitize:function(e){return DOMPurify.sanitize(e,this.DOMPurifyConfig)},draggableOptions:{cursor:"grabbing"},queryBuilderOptions:{allowViewRules:!1,allowClearRules:!1},queryBuilderPlugins:{"filter-description":null,"unique-filter":null,"not-group":null},queryBuilderErrorClass:"invalid-tooltip",bundleIds:["dom","head"],tooltipOptions:{placement:"bottom",customClass:"ew-custom-tooltip",sanitizeFn:null},popoverOptions:{html:!0,customClass:"ew-custom-popover",sanitizeFn:null},loginWizardOptions:{autoAdjustHeight:!0,transition:{animation:"slideHorizontal",speed:"400",easing:""}},scrollIntoViewOptions:!0,securityCodeDebounce:1e3,resendOtpInterval:60,PDFObjectOptions:{},chartConfig:{},spinnerClass:"spinner-border text-primary",screenMediaQuery:"(min-width: 768px)",callbacks:{},jsTemplates:[],jsRenderHelpers:{},jsRenderAttributes:["src","href","title","data-bs-title"],autoHideSuccessMessage:!0,autoHideSuccessMessageDelay:5e3,searchOperatorChange:T,setLanguage:T,addOptionDialogShow:T,importDialogShow:T,toggleSearchOperator:T,togglePassword:T,sort:T,selectKey:T,export:T,exportWithCharts:T,setSearchType:T,emailDialogShow:T,selectAll:T,selectAllKeys:T,submitAction:T,addGridRow:T,confirmDelete:()=>!1,deleteGridRow:()=>!1};C.getStoredTheme=()=>localStorage.getItem("theme"),C.setStoredTheme=e=>localStorage.setItem("theme",e),C.getPreferredTheme=()=>{const e=C.getStoredTheme();return e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},C.isDark=()=>"dark"==C.getPreferredTheme(),C.updateIframes=()=>document.querySelectorAll(".ew-iframe").forEach((e=>{const t=C.getPreferredTheme(),n=e.contentWindow.document.documentElement;n.setAttribute("data-bs-theme",t),n.classList.toggle("dark","dark"==t)})),C.setTheme=e=>{"light"!==e&&"dark"!==e&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),"print"==new URL(window.location).searchParams.get("export")&&(e="light"),document.documentElement.setAttribute("data-bs-theme",e),C.updateIframes();const t=new CustomEvent("changetheme",{detail:e});document.dispatchEvent(t)},C.setTheme(C.getPreferredTheme()),C.showActiveTheme=function(e,t){void 0===t&&(t=!1);const n=document.querySelector("#bd-theme");if(!n)return;const i=document.querySelector("#bd-theme-text"),r=document.querySelector(".theme-icon-active"),o=document.querySelector("[data-bs-theme-value='"+e+"']");if(!o)return;const a=o.querySelector(".theme-icon");document.querySelectorAll("[data-bs-theme-value]").forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")})),o.classList.add("active"),o.setAttribute("aria-pressed","true");let s=Array.from(r.classList.values());for(const e of s)(e.startsWith("fa-")||e.startsWith("bi-"))&&r.classList.remove(e);let l=null==a?void 0:a.classList.values();for(const e of l)(e.startsWith("fa-")||e.startsWith("bi-"))&&r.classList.add(e);const u=i.textContent+" ("+o.dataset.bsThemeValue+")";n.setAttribute("aria-label",u),t&&n.focus()},window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{const e=C.getStoredTheme();"light"!==e&&"dark"!==e&&C.setTheme(C.getPreferredTheme())})),C.initThemes=()=>{const e=C.getPreferredTheme();C.showActiveTheme(e),C.updateIframes(),document.querySelectorAll("[data-bs-theme-value]").forEach((e=>{e.addEventListener("click",(()=>{let t=e.getAttribute("data-bs-theme-value");C.setStoredTheme(t),C.setTheme(t),C.showActiveTheme(t,!0)}))}))},C.initPanel=e=>{if(e.dataset.isset)return;let t="";for(let n of e.children)if(t=n.innerHTML.trim(),""!==t)break;""===t&&e.classList.add("d-none"),e.dataset.isset=!0},C.panelSelectors=[".user-panel",".ew-grid-upper-panel",".ew-grid-lower-panel",".ew-multi-column-row > * > .card > .card-header",".ew-multi-column-row > * > .card > .card-footer"],C.initPanels=e=>null==e?void 0:e.querySelectorAll(C.panelSelectors.join(",")).forEach(C.initPanel);let I=()=>{C.initPanels(document),A=requestAnimationFrame(I)};s.ready("wrapper",(()=>A=requestAnimationFrame(I))),document.addEventListener("DOMContentLoaded",(()=>{C.initPanels(document),cancelAnimationFrame(A),s.done("dom")})),C.loadjs=function(e,t,n){let i=null!=t&&t.trim?t:"";i&&"load"!=i&&!C.bundleIds.includes(i)&&C.bundleIds.push(i);let r=(i?n:t)||{};e=(e=Array.isArray(e)?e:[e]).filter((e=>e&&(!Array.isArray(e)||e.length))),r.call&&(r={success:r}),r={...r,returnPromise:!0};let o={...r},a=Promise.resolve();return delete o.success,e.forEach(((e,t,n)=>{a=t==n.length-1?a.then((()=>s(e,i||r,i?r:null).catch((e=>console.log(e))))):a.then((()=>s(e,o).catch((e=>console.log(e)))))})),a},C.ready=function(e,t,n,i){let r=null!=n&&n.trim?n:"";r&&"load"!=r&&!C.bundleIds.includes(r)&&C.bundleIds.push(r),s.ready(e,(function(){C.loadjs(t,n,i)}))},s.ready("head",(function(){C.clientScript()})),s.ready("foot",(function(){C.startupScript(),s.done("load")}));let L=function(){let e={},t=!0,n=0;!1===arguments[0]&&(t=!1,n++),"object"==typeof arguments[n]&&(e=arguments[n],n++);let i=function(n){for(let i in n)n.hasOwnProperty(i)&&("object"!=typeof n[i]||Array.isArray(n[i])||null===n[i]?t?e[i]=n[i]:e.hasOwnProperty(i)||(e[i]=n[i]):e[i]=L(t,e[i],n[i]))};for(;n<arguments.length;n++)"object"==typeof arguments[n]&&i(arguments[n]);return e};return C.deepAssign=L,C.applyTemplateId=["jsrender","makerjs"],C.renderJsTemplates=function(e){var t;let n=jQuery,i=null!=(t=null==e?void 0:e.target)?t:document;n.views.helpers({language:C.language,phrase:C.language.phrase.bind(C.language),sprintf:C.sprintf,...C.jsRenderHelpers}),Array.from(i.querySelectorAll(".ew-js-template")).sort(((e,t)=>(e=parseInt(e.dataset.seq,10)||0)-(t=parseInt(t.dataset.seq,10)||0))).forEach(((e,t)=>{var i;let r=Object.assign({},null!=(i=e.dataset)?i:{}),{name:o,manual:a,allowCode:s}=r;if(a=""===a,s=""===s,o||(o="js-template-"+t),!n.render[o]){let t={jsTemplate:n.templates(o,{markup:e.text,allowCode:s}),template:e,...r};C.jsTemplates.push(t),a||C.renderTemplate(t)}})),s.done("templates")},C.renderTemplate=function(e){let t=jQuery,n=t(document);n.trigger("rendertemplate",[e]);let{template:i,jsTemplate:r,method:o,target:a,data:s,callback:l}=e,u=t(a||i.parentNode);"string"==typeof s&&(s=C.vars[s]||window[s]),s="object"==typeof s?s:{};let c=r.render(s);if(c&&o&&a?t(c)[o](u):c&&!o&&a?u.html(c):!c||o||a||u.append(c),l){let i="string"==typeof l?C.callbacks[l]||C[l]||window[l]:l;if("function"==typeof i){let r=t.Event("templaterendered",{target:u[0],detail:e});try{return i(r)}finally{n.trigger(r)}}}},C.refreshTemplate=function(e,t){let n=C.jsTemplates.find((t=>t.name==e));return n?("object"==typeof t&&(n.data=t),["config2fa","select2fa","verify2fa"].includes(e)&&(n.callback=()=>$.later(200,null,(()=>$("#login-wizard").smartWizard("fixHeight")))),C.renderTemplate(n)):null},C.overlayTemplate=function(){return'<div class="overlay"><div class="'+this.spinnerClass+'" style="width: 3rem; height: 3rem;" role="status"><span class="visually-hidden">'+this.language.phrase("Loading")+"</span></div></div>"},C.spinnerTemplate=function(){return'<div class="'+this.spinnerClass+' m-3 ew-loading" role="status"><span class="visually-hidden">'+this.language.phrase("Loading")+"</span></div>"},C.writeTabIdCookie=function(){C.Cookies.get(C.PROJECT_NAME+"_TabId")!=C.uniqueTabId.tabId&&C.Cookies.set(C.PROJECT_NAME+"_TabId",C.uniqueTabId.tabId,{sameSite:C.COOKIE_SAMESITE,secure:C.COOKIE_SECURE})},s.ready("clientvars",(()=>C.writeTabIdCookie())),window.addEventListener("visibilitychange",(()=>"visible"!=document.visibilityState||C.writeTabIdCookie())),C}();
//# sourceMappingURL=ewcore.min.js.map